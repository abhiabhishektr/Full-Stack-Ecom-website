<%-include('../layout/adminHeader')-%>

  <div class="container" style="margin-top: 50px;">
    <h2 style="margin-bottom: 20px;">Add Coupons</h2>

    <form id="addCouponForm">
      <div class="form-row">
        <div class="form-group col-md-6" style="margin-bottom: 16px;">
          <label for="code">Coupon Code:</label>
          <input type="text" class="form-control" id="code" name="code" required>
        </div>

        <div class="form-group col-md-6" style="margin-bottom: 16px;">
          <label for="discountType">Discount Type:</label>
          <select class="form-control" id="discountType" name="discountType" required>
            <option value="percentage">Percentage</option>
            <option value="fixed">Fixed Amount</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-6" style="margin-bottom: 16px;">
          <label for="discountAmount">Discount Amount:</label>
          <input type="number" class="form-control" id="discountAmount" name="discountAmount" required>
        </div>

        <div class="form-group col-md-6" style="margin-bottom: 16px;">
          <label for="expirationDate">Expiration Date:</label>
          <input type="date" class="form-control" id="expirationDate" name="expirationDate" required>
        </div>
      </div>

      <div class="form-group" style="margin-bottom: 16px;">
        <label for="minOrderAmount">Minimum Order Amount:</label>
        <input type="number" class="form-control" id="minOrderAmount" name="minOrderAmount">
      </div>

      <button type="button" class="btn btn-success" onclick="addCoupon()" style="background-color: #28a745; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer;">Add Coupon</button>
    </form>
  </div>

  <!-- Include Bootstrap JS and jQuery -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <script>
    async function addCoupon() {
      const code = document.getElementById('code').value;
      const discountType = document.getElementById('discountType').value;
      const discountAmount = document.getElementById('discountAmount').value;
      const expirationDate = document.getElementById('expirationDate').value;
      const minOrderAmount = document.getElementById('minOrderAmount').value;

      console.log(discountType)
      try {
        const response = await fetch('/CouponsAdmin', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            code,
            discountType,
            discountAmount: parseFloat(discountAmount),
            expirationDate,
            minOrderAmount: minOrderAmount ? parseFloat(minOrderAmount) : undefined,
          }),
        });

        if (response.ok) {
          alert('Coupon added successfully!');
          document.getElementById('addCouponForm').reset();
        } else {
          const data = await response.json();
          alert(`Error: ${data.error}`);
        }
      } catch (error) {
        console.error('Error adding coupon:', error);
        alert('An error occurred while adding the coupon. Please try again.');
      }
    }
  </script>
  



    </div>
  <script src="/admin/src/assets/libs/jquery/dist/jquery.min.js"></script>
  <script src="/admin/src/assets/libs/popper.js/dist/umd/popper.min.js"></script>
  <script src="/admin/src/assets/libs/bootstrap/dist/js/bootstrap.min.js"></script>
  <!-- apps -->
  <!-- apps -->
  <script src="/admin/src/dist/js/app-style-switcher.js"></script>
  <script src="/admin/src/dist/js/feather.min.js"></script>
  <script src="/admin/src/assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
  <script src="/admin/src/dist/js/sidebarmenu.js"></script>
  <!--Custom JavaScript -->
  <script src="/admin/src/dist/js/custom.min.js"></script>
  <!--This page JavaScript -->
  <script src="/admin/src/assets/extra-libs/c3/d3.min.js"></script>
  <script src="/admin/src/assets/extra-libs/c3/c3.min.js"></script>
  <script src="/admin/src/assets/libs/chartist/dist/chartist.min.js"></script>
  <script src="/admin/src/assets/libs/chartist-plugin-tooltips/dist/chartist-plugin-tooltip.min.js"></script>
  <script src="/admin/src/assets/extra-libs/jvector/jquery-jvectormap-2.0.2.min.js"></script>
  <script src="/admin/src/assets/extra-libs/jvector/jquery-jvectormap-world-mill-en.js"></script>
  <script src="/admin/src/dist/js/pages/dashboards/dashboard1.min.js"></script>
  </body>
  
  </html>